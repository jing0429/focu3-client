(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{3685:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(859)}])},859:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return H}});var n,a=r(5893),s=r(7294),o=r(5144);function i(e){var t=e.expand,r=e.setExpand;return(0,a.jsx)("div",{className:" !absolute left-0 top-20 btn !bg-blue-400 dark:bg-gray-700 btn-lg flex items-center justify-center dark:border-white",onClick:function(){r(!t)},children:t?(0,a.jsx)("i",{className:"bi bi-x text-2xl dark:text-white"}):(0,a.jsx)("i",{className:"bi bi-chat-left-text text-2xl dark:text-white"})})}var c=new Uint8Array(16);function l(){if(!n&&!(n="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(c)}var d=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var u=function(e){return"string"===typeof e&&d.test(e)},b=[],f=0;f<256;++f)b.push((f+256).toString(16).substr(1));var m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(b[e[t+0]]+b[e[t+1]]+b[e[t+2]]+b[e[t+3]]+"-"+b[e[t+4]]+b[e[t+5]]+"-"+b[e[t+6]]+b[e[t+7]]+"-"+b[e[t+8]]+b[e[t+9]]+"-"+b[e[t+10]]+b[e[t+11]]+b[e[t+12]]+b[e[t+13]]+b[e[t+14]]+b[e[t+15]]).toLowerCase();if(!u(r))throw TypeError("Stringified UUID is invalid");return r};var x=function(e,t,r){var n=(e=e||{}).random||(e.rng||l)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var a=0;a<16;++a)t[r+a]=n[a];return t}return m(n)},h=function(e){var t=e.memo,r=e.setMemo,n=(0,s.useState)(""),o=n[0],i=n[1];return(0,a.jsxs)("div",{className:"card left-0   !absolute top-40  p-6 dark:bg-black dark:border-white z-10",children:[(0,a.jsx)("div",{className:"card-header border-black dark:text-white dark:border-white",children:"Memo"}),(0,a.jsxs)("div",{className:"alert alert-info",children:[(0,a.jsx)("i",{className:"bi bi-exclamation-circle"})," Memo will lost when leave"]}),(0,a.jsx)("ul",{className:"list-group list-group-flush",children:t.map((function(e){return(0,a.jsxs)("li",{className:"list-group-item w-full relative dark:bg-black dark:text-white dark:border-gray-500",children:[e.title,(0,a.jsx)("button",{className:"rounded-full btn btn-success btn-sm absolute right-0 top-1",onClick:function(){return n=e.id,t=t.filter((function(e){return e.id!=n})),void r(t);var n},children:(0,a.jsx)("i",{className:"bi bi-check "})})]})}))}),(0,a.jsx)("input",{type:"text",className:"form-control mt-3",onChange:function(e){return i(e.target.value)},value:o,onKeyDown:function(e){if("Enter"===e.key){var n={title:o,id:x()};t.push(n),r(t),i("")}},required:!0})]})};function p(){var e=(0,s.useState)(!1),t=e[0],r=e[1],n=(0,s.useState)([]),o=n[0],c=n[1];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i,{expand:t,setExpand:r}),t&&(0,a.jsx)(h,{memo:o,setMemo:c,expand:t})]})}var g=r(5666),v=r.n(g),j=r(3793),k=r(5538);function y(e,t,r,n,a,s,o){try{var i=e[s](o),c=i.value}catch(l){return void r(l)}i.done?t(c):Promise.resolve(c).then(n,a)}var w=function(e){var t,r=e.task,n=e.TaskFilter,i=e.setFocus,c=e.focus,l=e.TimeUpdater,d="!border-[".concat(r.color,"]"),u=" !border-2 rounded-md bg-white dark:bg-black "+d,b=(0,s.useState)(!1),f=b[0],m=b[1],x=(0,s.useContext)(o._).state.user;(0,s.useEffect)((function(){""!=c&&(t=setTimeout((function(){l(r.id,r.time+1)}),6e4))}));var h,p=(h=v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.Z.saveTask(x,r);case 3:e.sent,n(r.id),k.Am.success("Save successfully!"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),k.Am.error((0,a.jsxs)("div",{children:["Some error happened!",(0,a.jsx)("br",{}),"Please try again later!"]}));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})),function(){var e=this,t=arguments;return new Promise((function(r,n){var a=h.apply(e,t);function s(e){y(a,r,n,s,o,"next",e)}function o(e){y(a,r,n,s,o,"throw",e)}s(void 0)}))});return(0,a.jsx)("div",{className:"col ",children:(0,a.jsxs)("div",{className:u,children:[(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsx)("h1",{className:"text-3xl text-center dark:text-white",children:r.name}),(0,a.jsx)("h2",{className:"text-lg mb-2 text-muted text-center",children:r.category}),(0,a.jsx)("div",{className:"accordion",id:"accordion",children:(0,a.jsxs)("div",{className:"accordion-item",children:[(0,a.jsx)("h2",{className:"accordion-header",id:"headingOne",children:(0,a.jsx)("button",{className:"accordion-button dark:bg-black dark:text-white"+(f?" collapsed":""),type:"button","data-bs-toggle":"collapse","data-bs-target":"#description","aria-expanded":"true","aria-controls":"description",onClick:function(){m(!f)},children:"description"})}),(0,a.jsx)("div",{id:"description",class:"accordion-collapse collapse"+(f?" show":""),"aria-labelledby":"headingOne","data-bs-parent":"#accordion",children:(0,a.jsx)("div",{className:"accordion-body ",children:(0,a.jsx)("textarea",{className:"form-control resize-none border-none focus:outline-none mb-2 bg-white ",readOnly:!0,value:r.desc,rows:4})})})]})})]}),c?(0,a.jsxs)("div",{className:"alert ".concat(d,"  dark:bg-black dark:text-white mx-3 text-center"),children:["focus ",r.time," min"]}):(0,a.jsxs)("div",{className:"alert ".concat(d,"  dark:bg-black dark:text-white mx-3 text-center"),children:["total ",r.time," min"]}),(0,a.jsxs)("div",{className:"px-1 flex flex-wrap justify-around mb-3 ",children:[(0,a.jsx)("button",{className:"btn btn-success ring-1 ring-emerald-500",disabled:""!==c,onClick:p,children:"Finish"}),c?(0,a.jsxs)("button",{className:"btn btn-primary ring-1",onClick:function(){i(""),clearTimeout(t)},children:[(0,a.jsx)("i",{className:"bi bi-pause"}),"Pause"]}):(0,a.jsxs)("button",{className:"btn btn-primary ring-1 ",onClick:function(){return i(r.id)},children:[(0,a.jsx)("i",{className:"bi bi-play"}),"Focus"]}),(0,a.jsx)("button",{className:"btn btn-danger ring-1 ring-red-400",onClick:function(){return n(r.id)},disabled:""!==c,children:"Delete"})]})]})})},N=function(e){var t=e.task,r="card border-2 h-72 rounded-md  dark:bg-black "+"border-[".concat(t.color,"]");return(0,a.jsx)("div",{className:"col",children:(0,a.jsx)("div",{className:r})})},C=function(e){var t=e.expand,r=e.setExpand;return(0,a.jsx)("div",{className:" absolute right-0 top-20 btn bg-blue-400 dark:bg-gray-700 btn-lg flex items-center justify-center dark:border-white",onClick:function(){r(!t)},children:t?(0,a.jsx)("i",{className:"bi bi-x text-2xl dark:text-white"}):(0,a.jsx)("i",{className:"bi bi-plus text-2xl dark:text-white"})})},O=function(e){var t=e.newTask,r=e.color,n=e.colorHandler,s=e.bgClass,o="p-3 btn border-2  "+e.borderClass;t.color===r&&(o+=s);return(0,a.jsx)("button",{type:"button",className:o,onClick:function(e){e.preventDefault(),n(r)}})};function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){S(e,t,r[t])}))}return e}function E(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var P=function(e){var t=e.tasks,r=e.setTasks,n=(0,s.useState)({color:"#00b894",time:0}),o=n[0],i=n[1],c=function(e){i(T({},o,{color:e}))},l=(0,s.useRef)("");return(0,a.jsxs)("form",{className:" card !absolute right-0 top-40 w-96 z-10 p-4 dark:border-white dark:bg-black",ref:l,children:[(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsx)("input",{type:"text",name:"taskname",className:"form-control",placeholder:"Task Name",required:!0,onChange:function(e){i(T({},o,{name:e.target.value}))},autoComplete:"off"})}),(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsxs)("select",{className:"form-select",required:!0,onChange:function(e){i(T({},o,{category:e.target.value}))},children:[(0,a.jsx)("option",{selected:!0,disabled:!0,children:"Category"}),(0,a.jsx)("option",{value:"financial",children:"Financial"}),(0,a.jsx)("option",{value:"daily",children:"Daily"}),(0,a.jsx)("option",{value:"health",children:"Health"}),(0,a.jsx)("option",{value:"ability",children:"Ability"}),(0,a.jsx)("option",{value:"hw",children:"Hw"}),(0,a.jsx)("option",{value:"learning",children:"Learning"}),(0,a.jsx)("option",{value:"learning",children:"Planning"}),(0,a.jsx)("option",{value:"learning",children:"Note"}),(0,a.jsx)("option",{value:"other",children:"Other"})]})}),(0,a.jsxs)("div",{className:"btn-group mb-2",children:[(0,a.jsx)(O,{newTask:o,colorHandler:c,color:"#ef4444",bgClass:"!bg-[#ef4444]",borderClass:"!border-[#ef4444] "}),(0,a.jsx)(O,{newTask:o,colorHandler:c,color:"#f87315",bgClass:"!bg-[#f87315]",borderClass:"!border-[#f87315] "}),(0,a.jsx)(O,{newTask:o,colorHandler:c,color:"#eab305",bgClass:"!bg-[#eab305]",borderClass:"!border-[#eab305] "}),(0,a.jsx)(O,{newTask:o,colorHandler:c,color:"#00b894",bgClass:"!bg-[#00b894]",borderClass:"!border-[#00b894] "}),(0,a.jsx)(O,{newTask:o,colorHandler:c,color:"#3b81f6",bgClass:"!bg-[#3b81f6]",borderClass:"!border-[#3b81f6] "}),(0,a.jsx)(O,{newTask:o,colorHandler:c,color:"#6b5ce7",bgClass:"!bg-[#6b5ce7]",borderClass:"!border-[#6b5ce7] "})]}),(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsx)("input",{type:"Number",className:"form-control",placeholder:"Already used minute (optional)",min:0,onChange:function(e){i(T({},o,{time:Number(e.target.value)}))},autoComplete:"off"})}),(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsx)("textarea",{className:"form-control",rows:2,placeholder:"Description (optional)",onChange:function(e){i(T({},o,{desc:e.target.value}))}})}),(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsx)("button",{className:"form-control bg-blue-300 dark:bg-black dark:text-white",type:"button",disabled:!(o.name&&o.category),onClick:function(e){e.preventDefault(),o.id=x(),r(E(t).concat([o])),i({color:"#00b894",time:0,category:"financial"}),l.current.reset()},children:"Create New Task"})})]})};function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var A=function(){window.addEventListener("beforeunload",(function(){void 0!==o&&localStorage.setItem("tasks",JSON.stringify(o))}));var e=(0,s.useState)(!1),t=e[0],r=e[1],n=(0,s.useState)([]),o=n[0],i=n[1],c=(0,s.useState)(""),l=c[0],d=c[1];(0,s.useEffect)((function(){var e=JSON.parse(localStorage.getItem("tasks"));e&&i(e)}),[]),(0,s.useEffect)((function(){return function(){localStorage.setItem("tasks",JSON.stringify(o))}}));var u=function(e){i(o.filter((function(t){return t.id!=e})))},b=function(e,t){i(o.map((function(r){return r.id===e?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){_(e,t,r[t])}))}return e}({},r,{time:t}):r})))};return(0,a.jsxs)("div",{className:"w-5/6 lg:w-3/4 mx-auto p-3",children:[(0,a.jsx)(C,{expand:t,setExpand:r}),t&&(0,a.jsx)(P,{tasks:o,setTasks:i,expand:t,setExpand:r}),(0,a.jsx)("h1",{className:"display-4 text-center dark:text-white",children:"Today Tasks"}),(0,a.jsx)("div",{className:"row row-cols-1 row-cols-lg-3 g-4",children:o.map((function(e){return l&&l!==e.id?(0,a.jsx)(N,{task:e}):(0,a.jsx)(w,{task:e,focus:l,setFocus:d,TaskFilter:u,TimeUpdater:b})}))})]})};var H=function(){var e=(0,s.useContext)(o._).authHandler;return(0,s.useEffect)(e,[]),(0,a.jsxs)("div",{children:[(0,a.jsx)(p,{}),(0,a.jsx)(A,{})]})}}},function(e){e.O(0,[774,888,179],(function(){return t=3685,e(e.s=t);var t}));var t=e.O();_N_E=t}]);